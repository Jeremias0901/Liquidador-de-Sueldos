<!DOCTYPE html>
<html lang="es">
<head>
    <script src="../view/resources/loadComponents.js"></script>
    <script src="js/index.js"></script>
    <title>Aguinaldo</title>
</head>
<body>
    <header></header>
    <nav></nav>

    <div class="contenedor">
        <div class="contenedor__aside" id="aside__left">
        </div>

        <div class="contenedor__contenido">
            <div class="semestres">
                <span>
                    <label class="semestres__button" for="semestres__button-1sem">1era cuota</label>
                    <input id="semestres__button-1sem" name="semestre" type="radio" hidden />
                </span>
                <span>
                    <label class="semestres__button" for="semestres__button-2sem">2da cuota</label>
                    <input id="semestres__button-2sem" name="semestre" type="radio" hidden />
                </span>
            </div>
            <div>
                <form class="semestres__formulario sombra contenedor3d" style="display: none;">
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                    <span class="semestres__control">
                        <label class="semestres__label" for=""></label>
                        <input class="semestres__input" id="" placeholder="Sueldo Neto" type="number" required />
                    </span>
                </form>
            </div>
            <div class="resultado semestres__control sombra" style="display: none;">
                <label class="resultado__label" for="resultado__label"> Aguinaldo </label>
                <input class="resultado__input" id="resultado__input" readonly/>
            </div>
        </div>

        <div class="contenedor__aside" id="aside__right">
        </div>
    </div>

    <script>
        const form = document.querySelector('.semestres__formulario');
        const loadForm = () => {
            form.style.display = 'flex';

            const loadSemestre = sem => {
                const semestresData = [
                    ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio'],
                    ['Julio', 'Agosto', 'Septiembre', 'Octubre', 'Nobiembre', 'Diciembre']
                ];
                const semestre = semestresData[sem];

                semestre.forEach((mes, i) => {
                    const [label] = form.children[i].getElementsByTagName('label');
                    label.innerHTML = mes;
                    label.setAttribute('for', mes);

                    const [input] = form.children[i].getElementsByTagName('input');
                    input.id = mes;
                })
            }

            loadSemestre(document.querySelector('#semestres__button-1sem').checked ? 0 : 1);
        }

        const activarBtn = (btnAct, btnDst) => {
            btnAct.classList.add('semestres__button-activado');
            btnDst.classList.remove('semestres__button-activado');
        }

        const buttons = document.querySelectorAll('.semestres__button');

        document.querySelector('#semestres__button-1sem').addEventListener('click', e => {
            activarBtn(buttons[1], buttons[0]);
            loadForm();
        })

        document.querySelector('#semestres__button-2sem').addEventListener('click', () => {
            activarBtn(buttons[0], buttons[1]);
            loadForm();
        })

        let validated;
        const validate = () => {
            const expression = /^([1-9]{1}[0-9]{0,9})(\.[1-9]{2}|)$/;
            let input;

            validated = true;
            for (let i = 0; i < form.children.length; i++) {
                const span = form.children[i];
                input = span.getElementsByTagName('input')[0].value;
                if(!expression.test(input)){
                    validated = false;
                    break;
                }
            }

            return validated;
        }

        const inputs = document.querySelectorAll('.semestres__input');

        for (let i = 0; i < inputs.length; i++) {
            const input = inputs[i];
            input.addEventListener('keyup', () => {
                if(validate())
                    document.querySelector('.resultado').style.display = 'flex';
                else
                    document.querySelector('.resultado').style.display = 'none';
            })
        }
    </script>

    <footer></footer>
</body>
</html>
